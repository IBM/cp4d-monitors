{"version":3,"file":"component---src-pages-monitors-cp-4-d-watsonstudio-job-schedule-info-deployer-index-mdx-0aa783b0cf984f454d08.js","mappings":"4RAQaA,EAAe,CAAC,EACvBC,EAAc,CAClBD,aAAAA,GAEIE,EAAYC,EAAAA,EACH,SAASC,EAAT,GAGX,IAFFC,EAEC,EAFDA,WACGC,GACF,YACD,OAAO,QAACJ,EAAD,iBAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,eAG5E,mGACA,8TACA,8OACA,oBAAK,gBAAMC,WAAW,OAAjB,iSAML,2SACA,oBAAK,gBAAMA,WAAW,OAAjB,wZAOL,iEACA,oBAAK,gBAAMA,WAAW,OAAjB,kVASL,uFACA,uLAAyK,sBAAYA,WAAW,KAAvB,wBAAzK,oIACA,oBAAK,gBAAMA,WAAW,OAAjB,ucAYL,sBACE,iBAAOA,WAAW,UAChB,cAAIA,WAAW,UACb,cAAIA,WAAW,KACb,MAAS,MADX,aAGA,cAAIA,WAAW,KACb,MAAS,MADX,gBAGA,cAAIA,WAAW,KACb,MAAS,MADX,cAGA,cAAIA,WAAW,KACb,MAAS,MADX,qBAKJ,iBAAOA,WAAW,UAChB,cAAIA,WAAW,UACb,cAAIA,WAAW,KACb,MAAS,MADX,2BAGA,cAAIA,WAAW,KACb,MAAS,MADX,0CAGA,cAAIA,WAAW,KACb,MAAS,MADX,QAGA,cAAIA,WAAW,KACb,MAAS,SAGb,cAAIA,WAAW,UACb,cAAIA,WAAW,KACb,MAAS,MADX,kBAGA,cAAIA,WAAW,KACb,MAAS,MADX,iEAGA,cAAIA,WAAW,KACb,MAAS,MADX,QAGA,cAAIA,WAAW,KACb,MAAS,MADX,uBAIF,cAAIA,WAAW,UACb,cAAIA,WAAW,KACb,MAAS,MADX,sBAGA,cAAIA,WAAW,KACb,MAAS,MADX,2DAGA,cAAIA,WAAW,KACb,MAAS,MADX,OAGA,cAAIA,WAAW,KACb,MAAS,SAGb,cAAIA,WAAW,UACb,cAAIA,WAAW,KACb,MAAS,MADX,wBAGA,cAAIA,WAAW,KACb,MAAS,MADX,yEAGA,cAAIA,WAAW,KACb,MAAS,MADX,OAGA,cAAIA,WAAW,KACb,MAAS,SAGb,cAAIA,WAAW,UACb,cAAIA,WAAW,KACb,MAAS,MADX,uBAGA,cAAIA,WAAW,KACb,MAAS,MADX,mDAGA,cAAIA,WAAW,KACb,MAAS,MADX,OAGA,cAAIA,WAAW,KACb,MAAS,SAGb,cAAIA,WAAW,UACb,cAAIA,WAAW,KACb,MAAS,MADX,qBAGA,cAAIA,WAAW,KACb,MAAS,MADX,mDAGA,cAAIA,WAAW,KACb,MAAS,MADX,OAGA,cAAIA,WAAW,KACb,MAAS,MADX,uBAIF,cAAIA,WAAW,UACb,cAAIA,WAAW,KACb,MAAS,MADX,oBAGA,cAAIA,WAAW,KACb,MAAS,MADX,2DAGA,cAAIA,WAAW,KACb,MAAS,MADX,OAGA,cAAIA,WAAW,KACb,MAAS,WAKjB,8EACA,0HAA4G,sBAAYA,WAAW,KAAvB,YAA5G,eACA,yBAAW,sBAAYA,WAAW,KAAvB,iBAAX,gEAAoI,sBAAYA,WAAW,KAAvB,UAApI,6CACA,mBACE,cAAIA,WAAW,MAAf,0GACA,cAAIA,WAAW,MAAf,uDAEF,oBAAK,gBAAMA,WAAW,OAAjB,0sJAuFL,iDACA,mGACA,oBAAK,gBAAMA,WAAW,OAAjB,0KAOR,CAEDJ,EAAWK,gBAAiB,C","sources":["webpack://cloud-pak-deployer-monitors/./src/pages/monitors/cp4d-watsonstudio-job-schedule-info/deployer/index.mdx"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/root/cp4d-monitors/doc/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h2>{`Configure authentication secrets in the vault used by the Cloud Pak Deployer`}</h2>\n    <p>{`By default the CP4D monitors codes are pulled from this public Github repository and the CP4D monitors images are pushed into the internal image registry of OpenShift. For this setup no credentials are required to either build the monitor images or push them into the internal OpenShift registry.`}</p>\n    <p>{`Optionally, if the Monitor Github repo is cloned into a private Github registry which does require authentication, a vault secret must be created which is used to authenticate to the private Github repo. For example:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`export STATUS_DIR=<Status directory of the Cloud Pak Deployer>\nexport CONFIG_DIR=<Configuration folder used by the Cloud Pak Deployer>\n\n# Monitor Source Repo secret\n./cp-deploy.sh vault set --vault-secret monitors_source_repo_secret --vault-secret-value ThisIsMyGitAccessToken!\n`}</code></pre>\n    <p>{`Optionally, if the build monitor image should be pushed to an external image registry which does require authentication (so not use the internal OpenShift image registry), a vault secret must be created which is used to authenticate to the external image registry. For example:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`export STATUS_DIR=<Status directory of the Cloud Pak Deployer>\nexport CONFIG_DIR=<Configuration folder used by the Cloud Pak Deployer>\n\n# External Image Registry Credentials\n./cp-deploy.sh vault set --vault-secret default_monitor_target_cr_user_secret --vault-secret-value TargetCRUserName\n./cp-deploy.sh vault set --vault-secret monitors_target_cr_password --vault-secret-value TargetCRPassword\n`}</code></pre>\n    <p>{`Validate the created secrets are available:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`export STATUS_DIR=<Status directory of the Cloud Pak Deployer>\nexport CONFIG_DIR=<Configuration folder used by the Cloud Pak Deployer>\n\n# List all secrets\n./cp-deploy.sh vault list\n\n# Optionally retrieve the values to confirm the correct values are loaded\n./cp-deploy.sh vault get --vault-secret monitors_source_repo_secret\n`}</code></pre>\n    <h2>{`Add OpenShift Monitoring to the Cloud Pak Deployer configuration`}</h2>\n    <p>{`Deploying monitors requires the OpenShift Monitoring to be enabled on the OpenShift cluster. If not already part of the Cloud Pak Deployer configuration, add the `}<inlineCode parentName=\"p\">{`openshift_monitoring`}</inlineCode>{` configuration. This can be added to an existing yaml configuration file, or a new yaml file can be added to the configuration.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`openshift_monitoring:\n- openshift_cluster_name: <OC_CLUSTER_NAME>\n  user_workload: enabled\n  # Optional properties to persist OpenShift Monitoring\n  pvc_storage_class: ibmc-vpc-block-retain-general-purpose\n  pvc_storage_size_gb: 100\n  # Optional Remote Rewrite\n  #remote_rewrite_url: http://remote_rewrite_url:<port>/write\n  # Optional install local instance of Grafana on OpenShift\n  grafana_operator: enabled\n  grafana_project: grafana\n`}</code></pre>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Property`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Mandatory`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Allowed values`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`openshift_cluster_name`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The name of the openshift cluster set`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Yes`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`user_workload`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Flag to enable or disable OpenShift User workload monitoring`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Yes`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`enabled, disabled`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`pvc_storage_class`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Storage class used to persist the OpenShift monitoring`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`No`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`pvc_storage_size_gb`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Size of the Persistent Volume Claim for storing OpenShift monitoring`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`No`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`remote_rewrite_url`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Push the Prometheus metrics to a remote system`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`No`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`grafana_operator`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Install the Red Hat Community Grafana Operator`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`No`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`enabled, disabled`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`grafana_project`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Target OpenShift Project for the deployment of Grafana`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`No`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}></td>\n        </tr>\n      </tbody>\n    </table>\n    <h2>{`Add the monitor to the Cloud Pak Deployer configuration`}</h2>\n    <p>{`Add the following section to the Cloud Pak Deployer configuration, or add the monitor to an existing `}<inlineCode parentName=\"p\">{`monitors`}</inlineCode>{` section. `}</p>\n    <p>{`The `}<inlineCode parentName=\"p\">{`cp4d_monitors`}</inlineCode>{` can be added to an existing configuration yaml file in the `}<inlineCode parentName=\"p\">{`config`}</inlineCode>{` folder, or create a seperate yaml file:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`OC_PROJECT: The Project name in which Cloud Pak for Data is deployed where the monitors will be added`}</li>\n      <li parentName=\"ul\">{`OC_CUSTER_NAME: The name of the OpenShift Cluster`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{}}>{`# List of cp4d_monitors\ncp4d_monitors:\n- name: cp4d-monitor-set-1\n  cp4d_instance: <OC_PROJECT>\n  openshift_cluster_name: <OC_CLUSTER_NAME>\n  default_monitor_source_repo: https://github.com/IBM/cp4d-monitors\n  default_monitor_source_token_secret: monitors_source_repo_secret\n  #Optional target Container Registry\n  default_monitor_target_cr: de.icr.io/monitorrepo  \n  default_monitor_target_cr_user_secret: monitors_target_cr_username\n  default_monitor_target_cr_password_secret: monitors_target_cr_password\n  # List of monitors\n  monitors:\n  - name: cp4d-platform-watsonstudio-schedule-job-info\n    #monitor_source_repo:             \n    #monitor_source_token_secret:    \n    #monitor_target_cr:              \n    #monitor_target_cr_user_secret:  \n    #monitor_target_cr_user_password:\n    context: cp4d-watsonstudio-job-info\n    label: latest\n    schedule: \"*/15 * * * *\"\n    event_types:\n    - name: \"cp4d_watsonstudio_jobs_schedule_overall_count\"\n      simple_name: \"Watson Studio Jobs Schedule Overall Count\"\n      alert_type: \"platform\"\n      short_description: \"CP4D Watson Studio Jobs Schedule Overall Count\"\n      long_description: \"CP4D Watson Studio Jobs Schedule Overall Count: <cp4d_watsonstudio_jobs_schedule_overall_count>\"\n      resolution: \"none\"\n      reason_code_prefix: \"80\"\n    - name: \"cp4d_watsonstudio_jobs_schedule_project_count\"\n      simple_name: \"Watson Studio Jobs Schedule Project Count\"\n      alert_type: \"platform\"\n      short_description: \"CP4D Watson Studio Jobs Schedule Project Count\"\n      long_description: \"CP4D Watson Studio Jobs Schedule Project Count: <cp4d_watsonstudio_jobs_schedule_project_count>\"\n      resolution: \"none\"\n      reason_code_prefix: \"80\"\n    - name: \"cp4d_watsonstudio_jobs_schedule_user_overall_count\"\n      simple_name: \"Watson Studio Jobs Schedule User Overall Count\"\n      alert_type: \"platform\"\n      short_description: \"CP4D Watson Studio Jobs Schedule User Overall Count\"\n      long_description: \"CP4D Watson Studio Jobs Schedule User Overall Count: <cp4d_watsonstudio_jobs_schedule_user_overall_count>\"\n      resolution: \"none\"\n      reason_code_prefix: \"80\"\n    - name: \"cp4d_watsonstudio_jobs_schedule_user_notebook_count\"\n      simple_name: \"Watson Studio Jobs Schedule User Notebook Count\"\n      alert_type: \"platform\"\n      short_description: \"CP4D Watson Studio Jobs Schedule User Notebook Count\"\n      long_description: \"CP4D Watson Studio Jobs Schedule User Notebook Count: <cp4d_watsonstudio_jobs_schedule_user_notebook_count>\"\n      resolution: \"none\"\n      reason_code_prefix: \"80\"\n    - name: \"cp4d_watsonstudio_jobs_schedule_user_datastage_count\"\n      simple_name: \"Watson Studio Jobs Schedule User Datastage Count\"\n      alert_type: \"platform\"\n      short_description: \"CP4D Watson Studio Jobs Schedule User Datastage Count\"\n      long_description: \"CP4D Watson Studio Jobs Schedule User Datastage Count: <cp4d_watsonstudio_jobs_schedule_user_datastage_count>\"\n      resolution: \"none\"\n      reason_code_prefix: \"80\"\n    - name: \"cp4d_watsonstudio_job_schedule_last_run_fail\"\n      simple_name: \"Watson Studio Job Scheudle Last Run Fail\"\n      alert_type: \"platform\"\n      short_description: \"CP4D Watson Studio Job Scheudle Last Run Fail\"\n      long_description: \"CP4D Watson Studio Job Scheudle Last Run Fail: <cp4d_watsonstudio_job_schedule_last_run_fail>\"\n      resolution: \"none\"\n      reason_code_prefix: \"80\"\n    - name: \"cp4d_watsonstudio_job_schedule_next_run_epoch_time\"\n      simple_name: \"Watson Studio Job Schedule Next Run Epoch Time\"\n      alert_type: \"platform\"\n      short_description: \"CP4D Watson Studio Job Schedule Next Run Epoch Time\"\n      long_description: \"CP4D Watson Studio Job Schedule Next Run Epoch Time: <cp4d_watsonstudio_jobs_schedule_next_run_epoch_time>\"\n      resolution: \"none\"\n      reason_code_prefix: \"80\"\n    - name: \"cp4d_watsonstudio_job_schedule_last_run_duration_seconds\"\n      simple_name: \"Watson Studio Job Schedule Last Run Duration Seconds\"\n      alert_type: \"platform\"\n      short_description: \"CP4D Watson Studio Job Schedule Last Run Duration Seconds\"\n      long_description: \"CP4D Watson Studio Job Schedule Last Run Duration Seconds: <cp4d_watsonstudio_job_schedule_last_run_duration_seconds>\"\n      resolution: \"none\"\n      reason_code_prefix: \"80\"\n    - name: \"cp4d_watsonstudio_job_schedule_last_run_epoch_time\"\n      simple_name: \"Watson Studio Job Schedule Last Run Epoch Time\"\n      alert_type: \"platform\"\n      short_description: \"CP4D Watson Studio Job Schedule Last Run Epoch Time\"\n      long_description: \"CP4D Watson Studio Job Schedule Last Run Epoch Time: <cp4d_watsonstudio_job_schedule_last_run_epoch_time>\"\n      resolution: \"none\"\n      reason_code_prefix: \"80\"\n`}</code></pre>\n    <h2>{`Run the Cloud Pak Deployer`}</h2>\n    <p>{`Run the Cloud Pak Deployer to implement the changes and deploy the monitors. `}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`export STATUS_DIR=<Status directory of the Cloud Pak Deployer>\nexport CONFIG_DIR=<Configuration folder used by the Cloud Pak Deployer>\n\n./cp-deploy.sh env apply\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"sourceRoot":""}