{
    "componentChunkName": "component---src-pages-monitors-cp-4-d-wml-deployment-space-info-deployer-index-mdx",
    "path": "/monitors/cp4d-wml-deployment-space-info/deployer/",
    "result": {"pageContext":{"frontmatter":{"title":"Deployment of Watson Machine Learning Development Space Information using the IBM Cloud Pak Deployer"},"relativePagePath":"/monitors/cp4d-wml-deployment-space-info/deployer/index.mdx","titleType":"page","MdxNode":{"id":"f0d956aa-77af-5867-af16-8130b682be2e","children":[],"parent":"29b9541f-25b4-5e76-9e5f-9dbaf223593d","internal":{"content":"---\ntitle: Deployment of Watson Machine Learning Development Space Information using the IBM Cloud Pak Deployer\n---\n\n## Configure authentication secrets in the vault used by the Cloud Pak Deployer\n\nBefore deploying the monitor, ensure the secrets used in the deployment are available in the vault used by the Cloud Pak Deployer.\n- Source repository token (**Mandatory**)  \n  Source token used to build and monitor image\n- Target Container Registry username and password (**Optional**)  \n  By default the image will be pushed to the internal image-registry of OpenShift, which do not require credentials. If the image is pushed to an external image registry, the required credentials must be available. \n\nExample to configure the secrets in the vaults used by the Cloud Pak Deployer\n\n```\nexport STATUS_DIR=<Status directory of the Cloud Pak Deployer>\nexport CONFIG_DIR=<Configuration folder used by the Cloud Pak Deployer>\n\n# Mandatory Source Repo secret\n./cp-deploy.sh vault set --vault-secret monitors_source_repo_secret --vault-secret-value ThisIsMyGitAccessToken!\n# Optional Target Image Registry Credentials\n./cp-deploy.sh vault set --vault-secret default_monitor_target_cr_user_secret --vault-secret-value TargetCRUserName\n./cp-deploy.sh vault set --vault-secret monitors_target_cr_password --vault-secret-value TargetCRPassword\n```\n\nValidate the created secrets are available:\n```\nexport STATUS_DIR=<Status directory of the Cloud Pak Deployer>\nexport CONFIG_DIR=<Configuration folder used by the Cloud Pak Deployer>\n\n# List all secrets\n./cp-deploy.sh vault list\n\n# Optionally retrieve the values to confirm the correct values are loaded\n./cp-deploy.sh vault get --vault-secret monitors_source_repo_secret\n```\n\n## Add OpenShift Monitoring to the Cloud Pak Deployer configuration\n\nDeploying monitors requires the OpenShift Monitoring to be enabled on the OpenShift cluster. If not already part of the Cloud Pak Deployer configuration, add the `openshift_monitoring` configuration. This can be added to an existing yaml configuration file, or a new yaml file can be added to the configuration.\n\n```\nopenshift_monitoring:\n- openshift_cluster_name: <OC_CLUSTER_NAME>\n  user_workload: enabled\n  # Optional properties to persist OpenShift Monitoring\n  pvc_storage_class: ibmc-vpc-block-retain-general-purpose\n  pvc_storage_size_gb: 100\n  # Optional Remote Rewrite\n  #remote_rewrite_url: http://remote_rewrite_url:<port>/write\n  # Optional install local instance of Grafana on OpenShift\n  grafana_operator: enabled\n  grafana_project: grafana\n```\n\n\n| Property | Description                                                          | Mandatory | Allowed values |\n| -------- | -------------------------------------------------------------------- | --------- | -------------- |\n| openshift_cluster_name  | The name of the openshift cluster set    | Yes       |   |\n| user_workload | Flag to enable or disable OpenShift User workload monitoring | Yes       | enabled, disabled  |\n| pvc_storage_class | Storage class used to persist the OpenShift monitoring | No       |  |\n| pvc_storage_size_gb | Size of the Persistent Volume Claim for storing OpenShift monitoring | No       |  |\n| remote_rewrite_url | Push the Prometheus metrics to a remote system | No       |  |\n| grafana_operator | Install the Red Hat Community Grafana Operator | No       | enabled, disabled  |\n| grafana_project | Target OpenShift Project for the deployment of Grafana | No       |  |\n\n\n\n## Add the monitor to the Cloud Pak Deployer configuration\n\nAdd the following section to the Cloud Pak Deployer configuration, or add the monitor to an existing `monitors` section. \n\nThe `cp4d_monitors` can be added to an existing configuration yaml file in the `config` folder, or create a seperate yaml file:\n- OC_PROJECT: The Project name in which Cloud Pak for Data is deployed where the monitors will be added\n- OC_CUSTER_NAME: The name of the OpenShift Cluster\n\n```\n# List of cp4d_monitors\ncp4d_monitors:\n- name: cp4d-monitor-set-1\n  cp4d_instance: <OC_PROJECT>\n  openshift_cluster_name: <OC_CLUSTER_NAME>\n  default_monitor_source_repo: https://github.com/IBM/cp4d-monitors\n  default_monitor_source_token_secret: monitors_source_repo_secret\n  #Optional target Container Registry\n  default_monitor_target_cr: de.icr.io/monitorrepo  \n  default_monitor_target_cr_user_secret: monitors_target_cr_username\n  default_monitor_target_cr_password_secret: monitors_target_cr_password\n  # List of monitors\n  monitors:\n  - name: cp4d-platform-wml-deployment-space-info\n    #monitor_source_repo:             \n    #monitor_source_token_secret:    \n    #monitor_target_cr:              \n    #monitor_target_cr_user_secret\n    context: cp4d-wml-deployment-space-info\n    label: latest\n    schedule: \"*/15 * * * *\"   \n    event_types:\n    - name: \"cp4d_wml_deployment_space_info_overall_count\"\n      simple_name: \"CP4D Watson Mechine Learning Deployment Space Info Overall Count\"\n      alert_type: \"platform\"\n      short_description: \"CP4D Watson Mechine Learning Deployment Space Info Overall Count\"\n      long_description: \"CP4D Watson Mechine Learning Deployment Space Info Overall Count: <cp4d_wml_deployment_space_info_overall_count>\"\n      resolution: \"none\"\n      reason_code_prefix: \"80\"\n    - name: \"cp4d_wml_deployment_space_deployed_count\"\n      simple_name: \"CP4D Watson Mechine Learning Deployment Space Deployed Count\"\n      alert_type: \"platform\"\n      short_description: \"CP4D Watson Mechine Learning Deployment Space Deployed Count\"\n      long_description: \"CP4D Watson Mechine Learning Deployment Space Deployed Count: <cp4d_wml_deployment_space_deployed_count>\"\n      resolution: \"none\"\n      reason_code_prefix: \"80\"      \n    - name: \"cp4d_wml_deployment_space_deployed_fail_count\"\n      simple_name: \"CP4D Watson Mechine Learning Deployment Space Deployed Fail Count\"\n      alert_type: \"platform\"\n      short_description: \"CP4D Watson Mechine Learning Deployment Space Deployed Fail Count\"\"\n      long_description: \"CP4D Watson Mechine Learning Deployment Space Deployed Fail Count: <cp4d_wml_deployment_space_deployed_fail_count>\"\n      resolution: \"none\"\n      reason_code_prefix: \"80\"\n    - name: \"cp4d_wml_deployment_space_deployed_count_online\"\n      simple_name: \"CP4D Watson Mechine Learning Deployment Space Deployed Count\"\n      alert_type: \"platform\"\n      short_description: \"CP4D Watson Mechine Learning Deployment Space Online Deployed Count\"\n      long_description: \"CP4D Watson Mechine Learning Deployment Space Online Deployed Count: <cp4d_wml_deployment_space_deployed_count_online>\"\n      resolution: \"none\"\n      reason_code_prefix: \"80\"\n    - name: \"cp4d_wml_deployment_space_deployed_count_batch\"\n      simple_name: \"CP4D Watson Mechine Learning Deployment Space Deployed Fail Count\"\n      alert_type: \"platform\"\n      short_description: \"CP4D Watson Mechine Learning Deployment Space Batch Deployed Count\"\n      long_description: \"CP4D Watson Mechine Learning Deployment Space Batch Deployed Count: <cp4d_wml_deployment_space_deployed_count_batch>\"\n      resolution: \"none\"\n      reason_code_prefix: \"80\"   \n```\n\n## Run the Cloud Pak Deployer\n\nRun the Cloud Pak Deployer to implement the changes and deploy the monitors. \n\n```\nexport STATUS_DIR=<Status directory of the Cloud Pak Deployer>\nexport CONFIG_DIR=<Configuration folder used by the Cloud Pak Deployer>\n\n./cp-deploy.sh env apply\n```\n","type":"Mdx","contentDigest":"7e3f048d7668d49b68ddf75036f5d492","owner":"gatsby-plugin-mdx","counter":151},"frontmatter":{"title":"Deployment of Watson Machine Learning Development Space Information using the IBM Cloud Pak Deployer"},"exports":{},"rawBody":"---\ntitle: Deployment of Watson Machine Learning Development Space Information using the IBM Cloud Pak Deployer\n---\n\n## Configure authentication secrets in the vault used by the Cloud Pak Deployer\n\nBefore deploying the monitor, ensure the secrets used in the deployment are available in the vault used by the Cloud Pak Deployer.\n- Source repository token (**Mandatory**)  \n  Source token used to build and monitor image\n- Target Container Registry username and password (**Optional**)  \n  By default the image will be pushed to the internal image-registry of OpenShift, which do not require credentials. If the image is pushed to an external image registry, the required credentials must be available. \n\nExample to configure the secrets in the vaults used by the Cloud Pak Deployer\n\n```\nexport STATUS_DIR=<Status directory of the Cloud Pak Deployer>\nexport CONFIG_DIR=<Configuration folder used by the Cloud Pak Deployer>\n\n# Mandatory Source Repo secret\n./cp-deploy.sh vault set --vault-secret monitors_source_repo_secret --vault-secret-value ThisIsMyGitAccessToken!\n# Optional Target Image Registry Credentials\n./cp-deploy.sh vault set --vault-secret default_monitor_target_cr_user_secret --vault-secret-value TargetCRUserName\n./cp-deploy.sh vault set --vault-secret monitors_target_cr_password --vault-secret-value TargetCRPassword\n```\n\nValidate the created secrets are available:\n```\nexport STATUS_DIR=<Status directory of the Cloud Pak Deployer>\nexport CONFIG_DIR=<Configuration folder used by the Cloud Pak Deployer>\n\n# List all secrets\n./cp-deploy.sh vault list\n\n# Optionally retrieve the values to confirm the correct values are loaded\n./cp-deploy.sh vault get --vault-secret monitors_source_repo_secret\n```\n\n## Add OpenShift Monitoring to the Cloud Pak Deployer configuration\n\nDeploying monitors requires the OpenShift Monitoring to be enabled on the OpenShift cluster. If not already part of the Cloud Pak Deployer configuration, add the `openshift_monitoring` configuration. This can be added to an existing yaml configuration file, or a new yaml file can be added to the configuration.\n\n```\nopenshift_monitoring:\n- openshift_cluster_name: <OC_CLUSTER_NAME>\n  user_workload: enabled\n  # Optional properties to persist OpenShift Monitoring\n  pvc_storage_class: ibmc-vpc-block-retain-general-purpose\n  pvc_storage_size_gb: 100\n  # Optional Remote Rewrite\n  #remote_rewrite_url: http://remote_rewrite_url:<port>/write\n  # Optional install local instance of Grafana on OpenShift\n  grafana_operator: enabled\n  grafana_project: grafana\n```\n\n\n| Property | Description                                                          | Mandatory | Allowed values |\n| -------- | -------------------------------------------------------------------- | --------- | -------------- |\n| openshift_cluster_name  | The name of the openshift cluster set    | Yes       |   |\n| user_workload | Flag to enable or disable OpenShift User workload monitoring | Yes       | enabled, disabled  |\n| pvc_storage_class | Storage class used to persist the OpenShift monitoring | No       |  |\n| pvc_storage_size_gb | Size of the Persistent Volume Claim for storing OpenShift monitoring | No       |  |\n| remote_rewrite_url | Push the Prometheus metrics to a remote system | No       |  |\n| grafana_operator | Install the Red Hat Community Grafana Operator | No       | enabled, disabled  |\n| grafana_project | Target OpenShift Project for the deployment of Grafana | No       |  |\n\n\n\n## Add the monitor to the Cloud Pak Deployer configuration\n\nAdd the following section to the Cloud Pak Deployer configuration, or add the monitor to an existing `monitors` section. \n\nThe `cp4d_monitors` can be added to an existing configuration yaml file in the `config` folder, or create a seperate yaml file:\n- OC_PROJECT: The Project name in which Cloud Pak for Data is deployed where the monitors will be added\n- OC_CUSTER_NAME: The name of the OpenShift Cluster\n\n```\n# List of cp4d_monitors\ncp4d_monitors:\n- name: cp4d-monitor-set-1\n  cp4d_instance: <OC_PROJECT>\n  openshift_cluster_name: <OC_CLUSTER_NAME>\n  default_monitor_source_repo: https://github.com/IBM/cp4d-monitors\n  default_monitor_source_token_secret: monitors_source_repo_secret\n  #Optional target Container Registry\n  default_monitor_target_cr: de.icr.io/monitorrepo  \n  default_monitor_target_cr_user_secret: monitors_target_cr_username\n  default_monitor_target_cr_password_secret: monitors_target_cr_password\n  # List of monitors\n  monitors:\n  - name: cp4d-platform-wml-deployment-space-info\n    #monitor_source_repo:             \n    #monitor_source_token_secret:    \n    #monitor_target_cr:              \n    #monitor_target_cr_user_secret\n    context: cp4d-wml-deployment-space-info\n    label: latest\n    schedule: \"*/15 * * * *\"   \n    event_types:\n    - name: \"cp4d_wml_deployment_space_info_overall_count\"\n      simple_name: \"CP4D Watson Mechine Learning Deployment Space Info Overall Count\"\n      alert_type: \"platform\"\n      short_description: \"CP4D Watson Mechine Learning Deployment Space Info Overall Count\"\n      long_description: \"CP4D Watson Mechine Learning Deployment Space Info Overall Count: <cp4d_wml_deployment_space_info_overall_count>\"\n      resolution: \"none\"\n      reason_code_prefix: \"80\"\n    - name: \"cp4d_wml_deployment_space_deployed_count\"\n      simple_name: \"CP4D Watson Mechine Learning Deployment Space Deployed Count\"\n      alert_type: \"platform\"\n      short_description: \"CP4D Watson Mechine Learning Deployment Space Deployed Count\"\n      long_description: \"CP4D Watson Mechine Learning Deployment Space Deployed Count: <cp4d_wml_deployment_space_deployed_count>\"\n      resolution: \"none\"\n      reason_code_prefix: \"80\"      \n    - name: \"cp4d_wml_deployment_space_deployed_fail_count\"\n      simple_name: \"CP4D Watson Mechine Learning Deployment Space Deployed Fail Count\"\n      alert_type: \"platform\"\n      short_description: \"CP4D Watson Mechine Learning Deployment Space Deployed Fail Count\"\"\n      long_description: \"CP4D Watson Mechine Learning Deployment Space Deployed Fail Count: <cp4d_wml_deployment_space_deployed_fail_count>\"\n      resolution: \"none\"\n      reason_code_prefix: \"80\"\n    - name: \"cp4d_wml_deployment_space_deployed_count_online\"\n      simple_name: \"CP4D Watson Mechine Learning Deployment Space Deployed Count\"\n      alert_type: \"platform\"\n      short_description: \"CP4D Watson Mechine Learning Deployment Space Online Deployed Count\"\n      long_description: \"CP4D Watson Mechine Learning Deployment Space Online Deployed Count: <cp4d_wml_deployment_space_deployed_count_online>\"\n      resolution: \"none\"\n      reason_code_prefix: \"80\"\n    - name: \"cp4d_wml_deployment_space_deployed_count_batch\"\n      simple_name: \"CP4D Watson Mechine Learning Deployment Space Deployed Fail Count\"\n      alert_type: \"platform\"\n      short_description: \"CP4D Watson Mechine Learning Deployment Space Batch Deployed Count\"\n      long_description: \"CP4D Watson Mechine Learning Deployment Space Batch Deployed Count: <cp4d_wml_deployment_space_deployed_count_batch>\"\n      resolution: \"none\"\n      reason_code_prefix: \"80\"   \n```\n\n## Run the Cloud Pak Deployer\n\nRun the Cloud Pak Deployer to implement the changes and deploy the monitors. \n\n```\nexport STATUS_DIR=<Status directory of the Cloud Pak Deployer>\nexport CONFIG_DIR=<Configuration folder used by the Cloud Pak Deployer>\n\n./cp-deploy.sh env apply\n```\n","fileAbsolutePath":"/root/yefei/cp4d-monitors/doc/src/pages/monitors/cp4d-wml-deployment-space-info/deployer/index.mdx"}}},
    "staticQueryHashes": ["1364590287","137577622","2102389209","2456312558","2746626797","3018647132","3037994772","768070550"]}